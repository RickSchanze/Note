{"ID":"20240213203222-n8qf1t8","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240213203222-n8qf1t8","title":"C++何时生成默认拷贝构造函数","updated":"20240213204828"},"Children":[{"ID":"20240213203233-2lmxg7r","Type":"NodeParagraph","Properties":{"id":"20240213203233-2lmxg7r","updated":"20240213203331"},"Children":[{"Type":"NodeText","Data":"如果不提供，那么使用位拷贝"}]},{"ID":"20240213203331-tt9cr2d","Type":"NodeBlockquote","Properties":{"id":"20240213203331-tt9cr2d","updated":"20240213203508"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240213203333-dec2wj2","Type":"NodeParagraph","Properties":{"id":"20240213203333-dec2wj2","updated":"20240213203339"},"Children":[{"Type":"NodeText","Data":"位拷贝的危害"}]},{"ID":"20240213203339-wccjdei","Type":"NodeParagraph","Properties":{"id":"20240213203339-wccjdei","updated":"20240213203508"},"Children":[{"Type":"NodeText","Data":"可能导致多个对象共享同一份资源，当一个对象销毁时就会将该资源释放掉，而此时另一些对象不知道该资源已经被释放，以为还有效，所以 当继续对资源进项操作时，就会发生发生了访问违规。"}]}]},{"ID":"20240213203222-idtot50","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240213203222-idtot50","updated":"20240213203550"},"Children":[{"Type":"NodeText","Data":"什么时候触发拷贝构造函数？"}]},{"ID":"20240213203551-nurpbqu","Type":"NodeParagraph","Properties":{"id":"20240213203551-nurpbqu","updated":"20240213203557"},"Children":[{"Type":"NodeText","Data":"例如:"}]},{"ID":"20240213203558-358849v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240213203558-358849v","updated":"20240213203629"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"A b;\nA a(b); // 通过一个对象来初始化另一个对象\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240213203631-oxwksqk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240213203631-oxwksqk","updated":"20240213203638"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"A a = b;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240213203640-nk53u5p","Type":"NodeParagraph","Properties":{"id":"20240213203640-nk53u5p","updated":"20240213203710"},"Children":[{"Type":"NodeText","Data":"函数传参时，形参为类对象时触发拷贝构造函数。"}]},{"ID":"20240213203710-zt78qz2","Type":"NodeParagraph","Properties":{"id":"20240213203710-zt78qz2","updated":"20240213203836"},"Children":[{"Type":"NodeText","Data":"函数返回时可能触发构造函数。返回时也可能会触发返回值优化，只进行一次构造。"}]},{"ID":"20240213203836-6vqk2mh","Type":"NodeParagraph","Properties":{"id":"20240213203836-6vqk2mh","updated":"20240213203841"},"Children":[{"Type":"NodeText","Data":"如果没有返回值优化："}]},{"ID":"20240213203841-ophmmfc","Type":"NodeParagraph","Properties":{"id":"20240213203841-ophmmfc","updated":"20240213204022"},"Children":[{"Type":"NodeText","Data":"1.看有没有移动构造（C++11以上），有则使用移动构造"}]},{"ID":"20240213203856-vwjo9m1","Type":"NodeParagraph","Properties":{"id":"20240213203856-vwjo9m1","updated":"20240213203907"},"Children":[{"Type":"NodeText","Data":"2.看类有没有拷贝构造函数"}]},{"ID":"20240213203907-ejf3mh6","Type":"NodeParagraph","Properties":{"id":"20240213203907-ejf3mh6","updated":"20240213203916"},"Children":[{"Type":"NodeText","Data":"3.上述两者不满足则报错。"}]},{"ID":"20240213204058-im57hyd","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240213204058-im57hyd","updated":"20240213204114"},"Children":[{"Type":"NodeText","Data":"什么时候生成默认拷贝构造函数"}]},{"ID":"20240213204115-d865zzc","Type":"NodeParagraph","Properties":{"id":"20240213204115-d865zzc","updated":"20240213204132"},"Children":[{"Type":"NodeText","Data":"编译器编译时生成默认拷贝构造函数。"}]},{"ID":"20240213204215-z54q0hi","Type":"NodeParagraph","Properties":{"id":"20240213204215-z54q0hi","updated":"20240213204336"},"Children":[{"Type":"NodeText","Data":"a.类成员变量也是一个类对象，此对象有默认拷贝构造函数如"}]},{"ID":"20240213204253-msxj2j8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240213204253-msxj2j8","updated":"20240213204313"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"class A{\nprivate:\n\tB b;\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240213204316-23c8hjb","Type":"NodeParagraph","Properties":{"id":"20240213204316-23c8hjb","updated":"20240213204355"},"Children":[{"Type":"NodeText","Data":"为了调用成员b的拷贝构造函数，也会生成A的默认拷贝构造函数。"}]},{"ID":"20240213204355-xiu0whq","Type":"NodeParagraph","Properties":{"id":"20240213204355-xiu0whq","updated":"20240213204616"},"Children":[{"Type":"NodeText","Data":"b.类继承自一个基类，基类具有默认拷贝构造函数。"}]},{"ID":"20240213204503-9qob4jp","Type":"NodeParagraph","Properties":{"id":"20240213204503-9qob4jp","updated":"20240213204614"},"Children":[{"Type":"NodeText","Data":"c.类中有虚函数，为了能拷贝虚函数表指针，那么需要生成一个默认构造函数。"}]},{"ID":"20240213204817-pkobbc8","Type":"NodeParagraph","Properties":{"id":"20240213204817-pkobbc8","updated":"20240213204828"},"Children":[{"Type":"NodeText","Data":"d.类继承自基类，而基类中含有虚函数"}]},{"ID":"20240213204816-5ir6wog","Type":"NodeParagraph","Properties":{"id":"20240213204816-5ir6wog"}}]}