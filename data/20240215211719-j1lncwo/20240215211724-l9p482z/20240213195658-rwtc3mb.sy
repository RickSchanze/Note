{"ID":"20240213195658-rwtc3mb","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240213195658-rwtc3mb","title":"虚函数表与虚函数表指针创建时机","updated":"20240213202732"},"Children":[{"ID":"20240213195721-4fu1rjf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240213195721-4fu1rjf","updated":"20240213195735"},"Children":[{"Type":"NodeText","Data":"背景"}]},{"ID":"20240213195736-wp8i6qm","Type":"NodeParagraph","Properties":{"id":"20240213195736-wp8i6qm","updated":"20240213195815"},"Children":[{"Type":"NodeText","Data":"用于实现（动态）多态"}]},{"ID":"20240213195825-z8s5vv1","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240213195825-z8s5vv1","updated":"20240213195838"},"Children":[{"Type":"NodeText","Data":"正文"}]},{"ID":"20240213200709-6gzp3re","Type":"NodeParagraph","Properties":{"id":"20240213200709-6gzp3re","updated":"20240213200715"},"Children":[{"Type":"NodeText","Data":"虚函数表是虚函数地址的数组"}]},{"ID":"20240213195839-frqrno2","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240213195839-frqrno2","updated":"20240213195838"},"Children":[{"Type":"NodeText","Data":"虚函数表的创建时机"}]},{"ID":"20240213195916-p710guc","Type":"NodeList","ListData":{},"Properties":{"id":"20240213195916-p710guc","updated":"20240213200801"},"Children":[{"ID":"20240213195917-46t3gaf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240213195917-46t3gaf","updated":"20240213195917"},"Children":[{"ID":"20240213195917-muptb0h","Type":"NodeParagraph","Properties":{"id":"20240213195917-muptb0h","updated":"20240213195921"},"Children":[{"Type":"NodeText","Data":"什么时候生成？"}]},{"ID":"20240213200000-xc8f7rc","Type":"NodeParagraph","Properties":{"id":"20240213200000-xc8f7rc","updated":"20240213200025"},"Children":[{"Type":"NodeText","Data":"编译器编译时生成虚函数表，当在类中发现virtual关键字时生成"}]}]},{"ID":"20240213195923-ek2cy3d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240213195923-ek2cy3d","updated":"20240213200801"},"Children":[{"ID":"20240213195923-dyyhocn","Type":"NodeParagraph","Properties":{"id":"20240213195923-dyyhocn","updated":"20240213195928"},"Children":[{"Type":"NodeText","Data":"存放在哪里？"}]},{"ID":"20240213195932-u3t2pdx","Type":"NodeParagraph","Properties":{"id":"20240213195932-u3t2pdx","updated":"20240213195958"},"Children":[{"Type":"NodeText","Data":"可执行程序（磁盘），运行时（内存）"}]},{"ID":"20240213200157-935auue","Type":"NodeParagraph","Properties":{"id":"20240213200157-935auue","updated":"20240213200226"},"Children":[{"Type":"NodeText","Data":"在只读数据段里存放虚函数表（.rodata）"}]},{"ID":"20240213200738-ati5e6s","Type":"NodeParagraph","Properties":{"id":"20240213200738-ati5e6s","updated":"20240213200801"},"Children":[{"Type":"NodeText","Data":"（.bss .data .text .rodata位于磁盘而代码区、数据区位于内存）"}]},{"ID":"20240213200231-1t5pfq2","Type":"NodeParagraph","Properties":{"id":"20240213200231-1t5pfq2","updated":"20240213200313"},"Children":[{"Type":"NodeText","Data":"（.bss段为未初始化或初始化为0的全局、静态变量，.data段为初始化的全局、静态变量）"}]},{"ID":"20240213200531-ot0aay6","Type":"NodeParagraph","Properties":{"id":"20240213200531-ot0aay6","updated":"20240213200545"},"Children":[{"Type":"NodeText","Data":"（.bss .data位于数据区）"}]},{"ID":"20240213200545-08y71y2","Type":"NodeParagraph","Properties":{"id":"20240213200545-08y71y2","updated":"20240213200600"},"Children":[{"Type":"NodeText","Data":"（.text .rodata位于代码区）"}]}]}]},{"ID":"20240213200828-r8oht34","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240213200828-r8oht34","updated":"20240213200846"},"Children":[{"Type":"NodeText","Data":"虚函数表与虚函数表指针的关系"}]},{"ID":"20240213200847-jirmbx2","Type":"NodeParagraph","Properties":{"id":"20240213200847-jirmbx2","updated":"20240213200912"},"Children":[{"Type":"NodeText","Data":"虚函数表与类相关，一个类只有一个虚函数表"}]},{"ID":"20240213200912-rh3dy50","Type":"NodeParagraph","Properties":{"id":"20240213200912-rh3dy50","updated":"20240213201252"},"Children":[{"Type":"NodeText","Data":"虚函数表指针与对象相关，每一个对象都有一个虚函数指针，指向一个类里唯一的虚函数表。"}]},{"ID":"20240213201807-na7xdwk","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240213201807-na7xdwk","updated":"20240213201821"},"Children":[{"Type":"NodeText","Data":"虚函数表指针的创建时机"}]},{"ID":"20240213201821-7juvu77","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240213201821-7juvu77","updated":"20240213202732"},"Children":[{"ID":"20240213201843-kdm93u5","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240213201843-kdm93u5","updated":"20240213201843"},"Children":[{"ID":"20240213201843-i6tbl6v","Type":"NodeParagraph","Properties":{"id":"20240213201843-i6tbl6v","updated":"20240213202012"},"Children":[{"Type":"NodeText","Data":"类对象构造时，将类的虚函数表地址赋值给vptr，如果类没有构造函数，编译器则会生成默认的构造函数来初始化虚函数表指针。"}]}]},{"ID":"20240213202012-h0ltn4c","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240213202012-h0ltn4c"},"Children":[{"ID":"20240213202012-noo0zui","Type":"NodeParagraph","Properties":{"id":"20240213202012-noo0zui","updated":"20240213202254"},"Children":[{"Type":"NodeText","Data":"如果子类没有覆写父类的虚函数，那么虚函数表地址会从父类复制到子类，如果子类有覆写父类的虚函数，那么子类会拥有自己的虚函数表。"}]}]},{"ID":"20240213202619-892apa2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240213202619-892apa2","updated":"20240213202732"},"Children":[{"ID":"20240213202619-45uacgn","Type":"NodeParagraph","Properties":{"id":"20240213202619-45uacgn","updated":"20240213202631"},"Children":[{"Type":"NodeText","Data":"继承情况下，虚函数表指针的赋值过程"}]},{"ID":"20240213202631-xjwsf7c","Type":"NodeParagraph","Properties":{"id":"20240213202631-xjwsf7c","updated":"20240213202709"},"Children":[{"Type":"NodeText","Data":"a.调用基类构造函数，此时虚函数表指针指向基类的虚函数表"}]},{"ID":"20240213202711-vtv6yjv","Type":"NodeParagraph","Properties":{"id":"20240213202711-vtv6yjv","updated":"20240213202732"},"Children":[{"Type":"NodeText","Data":"b.调用子类构造函数，此时虚函数表指针指向子类的虚函数表"}]}]}]},{"ID":"20240213201503-8ii047z","Type":"NodeParagraph","Properties":{"id":"20240213201503-8ii047z","updated":"20240213201821"}}]}